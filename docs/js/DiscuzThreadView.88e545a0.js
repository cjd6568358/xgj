(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DiscuzThreadView"],{"01f9":function(t,e,s){"use strict";var o=s("2d00"),n=s("5ca1"),r=s("2aba"),i=s("32e9"),a=s("84f2"),c=s("41a0"),l=s("7f20"),u=s("38fd"),d=s("2b4c")("iterator"),p=!([].keys&&"next"in[].keys()),f="@@iterator",g="keys",m="values",h=function(){return this};t.exports=function(t,e,s,v,b,y,_){c(s,e,v);var x,P,O,S=function(t){if(!p&&t in T)return T[t];switch(t){case g:return function(){return new s(this,t)};case m:return function(){return new s(this,t)}}return function(){return new s(this,t)}},w=e+" Iterator",L=b==m,j=!1,T=t.prototype,k=T[d]||T[f]||b&&T[b],I=k||S(b),C=b?L?S("entries"):I:void 0,N="Array"==e&&T.entries||k;if(N&&(O=u(N.call(new t)),O!==Object.prototype&&O.next&&(l(O,w,!0),o||"function"==typeof O[d]||i(O,d,h))),L&&k&&k.name!==m&&(j=!0,I=function(){return k.call(this)}),o&&!_||!p&&!j&&T[d]||i(T,d,I),a[e]=I,a[w]=h,b)if(x={values:L?I:S(m),keys:y?I:S(g),entries:C},_)for(P in x)P in T||r(T,P,x[P]);else n(n.P+n.F*(p||j),e,x);return x}},"0d58":function(t,e,s){var o=s("ce10"),n=s("e11e");t.exports=Object.keys||function(t){return o(t,n)}},"0f8e":function(t,e,s){},1495:function(t,e,s){var o=s("86cc"),n=s("cb7c"),r=s("0d58");t.exports=s("9e1e")?Object.defineProperties:function(t,e){n(t);var s,i=r(e),a=i.length,c=0;while(a>c)o.f(t,s=i[c++],e[s]);return t}},"15c6":function(t,e,s){"use strict";var o=s("c5e7"),n=s.n(o);n.a},"2aeb":function(t,e,s){var o=s("cb7c"),n=s("1495"),r=s("e11e"),i=s("613b")("IE_PROTO"),a=function(){},c="prototype",l=function(){var t,e=s("230e")("iframe"),o=r.length,n="<",i=">";e.style.display="none",s("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(n+"script"+i+"document.F=Object"+n+"/script"+i),t.close(),l=t.F;while(o--)delete l[c][r[o]];return l()};t.exports=Object.create||function(t,e){var s;return null!==t?(a[c]=o(t),s=new a,a[c]=null,s[i]=t):s=l(),void 0===e?s:n(s,e)}},"333d":function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pagination"},[t.prevUrl?s("a",{staticClass:"btn prev-btn",on:{click:function(e){t.gotoPage(t.prevUrl)}}},[t._v("上一页")]):t._e(),s("a",{staticClass:"btn currPageInfo"},[t._v(t._s(t.currPageNum+"/"+t.totalPageNum))]),t.nextUrl?s("a",{staticClass:"btn next-btn",on:{click:function(e){t.gotoPage(t.nextUrl)}}},[t._v("下一页")]):t._e()])},n=[],r=s("be94"),i=s("2f62"),a={props:["prevUrl","nextUrl","currPageNum","totalPageNum"],computed:Object(r["a"])({},Object(i["c"])(["targetHost"])),methods:{gotoPage(t){console.log(`${this.targetHost}${t}`),this.$router.push(encodeURIComponent(`${this.targetHost}${t}`))}}},c=a,l=(s("6b28"),s("2877")),u=Object(l["a"])(c,o,n,!1,null,"fa80837a",null);e["a"]=u.exports},"38fd":function(t,e,s){var o=s("69a8"),n=s("4bf8"),r=s("613b")("IE_PROTO"),i=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=n(t),o(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?i:null}},"41a0":function(t,e,s){"use strict";var o=s("2aeb"),n=s("4630"),r=s("7f20"),i={};s("32e9")(i,s("2b4c")("iterator"),function(){return this}),t.exports=function(t,e,s){t.prototype=o(i,{next:n(1,s)}),r(t,e+" Iterator")}},"453b":function(t,e,s){},"4cc1":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"discuzThread-page"},[s("Menus",{attrs:{url:t.url,tid:t.tid,fid:t.fid}}),s("div",{staticClass:"overflow-container"},[s("ul",{staticClass:"thread"},t._l(t.postList,function(e,o){return s("li",{key:o,staticClass:"post"},[s("div",{staticClass:"post-info"},[s("span",[t._v(t._s(e.postFloor))]),s("span",[t._v(t._s(e.authorName))]),s("span",[t._v(t._s(e.authorLevel))]),s("div",{staticClass:"post-time"},[t._v(t._s(e.postTime))])]),s("h2",[t._v(t._s(e.postTitle))]),s("div",{staticClass:"post-content",domProps:{innerHTML:t._s(e.content)}})])}),0),t.isLoading?t._e():s("Pagination",{attrs:{currPageNum:t.pageInfo.currPageNum,totalPageNum:t.pageInfo.totalPageNum,prevUrl:t.prevUrl,nextUrl:t.pageInfo.nextUrl}})],1)],1)},n=[],r=(s("ac6a"),s("a481"),s("1da1")),i=s("be94"),a=s("2f62"),c=s("333d"),l=s("aa9a"),u=s("dc16"),d={props:["url"],components:{Pagination:c["a"],Menus:l["a"]},data(){return{postList:[],tid:"",fid:"",pageInfo:{currPageNum:1,totalPageNum:1,nextPageNum:null,nextUrl:null}}},computed:Object(i["a"])({},Object(a["d"])(["isLoading","discuz"]),Object(a["c"])(["targetHost"]),{prevUrl(){let t="";if(this.pageInfo&&1!=this.pageInfo.currPageNum){let e=this.pageInfo.currPageNum;t=`thread-${this.tid}-${e-1}-1.html`}return t}}),mounted(){var t=this;return Object(r["a"])(function*(){yield t.getThreadPageJson(t.url),t.$route.query.scrollTop&&t.$nextTick(()=>{document.querySelector(".overflow-container").scrollTop=t.$route.query.scrollTop})})()},beforeMount(){},destroyed(){},beforeRouteUpdate(t,e,s){var o=this;return Object(r["a"])(function*(){s(),yield o.getThreadPageJson(t.params.url),document.querySelector(".overflow-container").scrollTop=0})()},methods:Object(i["a"])({},Object(a["b"])(["getPageData"]),{getThreadPageJson(t){var e=this;return Object(r["a"])(function*(){let s={};if(sessionStorage.getItem(t))s=JSON.parse(sessionStorage.getItem(t));else{let o=u["a"].thread;s=yield e.getPageData({url:t,selector:o}),sessionStorage.setItem(t,JSON.stringify(s))}let o=s,n=o.documentTitle,r=o.pageInfo,i=o.formhash,a=o.replyUrl,c=o.postList,l=void 0===c?[]:c;document.title=n,e.discuz.formhash=i,r&&(e.pageInfo=r),a&&(e.tid=a.replace(/(^post.*tid=)(\d.*)(&extra=.*$)/g,"$2"),e.fid=a.replace(/(^post.*fid=)(\d.*)(&tid=.*$)/g,"$2")),e.postList=l,e.postList.forEach(t=>{t.content=t.content.replace(/="attachment/g,`="${e.targetHost}attachment`).replace(/="images/g,`="${e.targetHost}images`).replace(/="http:\/\/(.*)\/bbs\//g,`="${e.targetHost}`).replace(/="(viewthread|thread.*)" target/g,(t,s)=>{return`="/xgj/discuz/thread/${encodeURIComponent(e.targetHost+s)}" target`}).replace(/:14pt/g,":5vw")})})()}})},p=d,f=(s("602e"),s("2877")),g=Object(f["a"])(p,o,n,!1,null,null,null);e["default"]=g.exports},"51a2":function(t,e,s){},"602e":function(t,e,s){"use strict";var o=s("51a2"),n=s.n(o);n.a},"6b28":function(t,e,s){"use strict";var o=s("0f8e"),n=s.n(o);n.a},"7f20":function(t,e,s){var o=s("86cc").f,n=s("69a8"),r=s("2b4c")("toStringTag");t.exports=function(t,e,s){t&&!n(t=s?t:t.prototype,r)&&o(t,r,{configurable:!0,value:e})}},"84f2":function(t,e){t.exports={}},"9c6c":function(t,e,s){var o=s("2b4c")("unscopables"),n=Array.prototype;void 0==n[o]&&s("32e9")(n,o,{}),t.exports=function(t){n[o][t]=!0}},aa9a:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{class:t.isOpened&&"opened"},[s("svg",{staticStyle:{position:"absolute",width:"0",height:"0"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[s("defs",[s("symbol",{attrs:{id:"icon-close",viewBox:"0 0 32 32"}},[s("title",[t._v("close")]),s("path",{attrs:{d:"M17.387 16l8.907-8.907c0.373-0.373 0.373-1.013 0-1.44-0.373-0.373-1.013-0.373-1.387 0l-8.907 8.907-8.907-8.853c-0.373-0.373-1.013-0.373-1.44 0-0.373 0.373-0.373 1.013 0 1.387l8.907 8.907-8.907 8.907c-0.373 0.373-0.373 1.013 0 1.44 0.373 0.373 1.013 0.373 1.387 0l8.907-8.907 8.907 8.907c0.373 0.373 1.013 0.373 1.387 0 0 0 0 0 0 0 0.373-0.373 0.373-1.013 0-1.44l-8.853-8.907z"}})])])]),s("a",{staticClass:"btn-menu",on:{click:t.toggleclass}},[s("svg",[s("use",{attrs:{"xlink:href":"#icon-close"}})])]),s("li",[s("span",{on:{click:t.saveProgress}},[t._v("收藏")])]),t.hasProgress?s("li",[s("span",{on:{click:t.delProgress}},[t._v("删除")])]):t._e(),t.tid&&t.fid?s("li",[s("span",{on:{click:t.onReply}},[t._v("回复")])]):t._e(),s("li",[s("span",{on:{click:t.onReload}},[t._v("刷新")])])])},n=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"reply-modal"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.subject,expression:"subject"}],attrs:{type:"text",placeholder:"选填,请输入标题"},domProps:{value:t.subject},on:{input:function(e){e.target.composing||(t.subject=e.target.value)}}}),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"必填,请输入最少20个字内容"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),s("ul",[s("li",{staticClass:"btn submit",on:{click:t.submit}},[t._v("提交")]),s("li",{staticClass:"btn cancel",on:{click:t.closeModal}},[t._v("取消")])])])},i=[],a=s("1da1"),c=s("be94"),l=s("2f62"),u={props:["url","fid","tid"],data(){return{subject:"",message:""}},destroyed(){},methods:Object(c["a"])({},Object(l["b"])(["submitReply"]),{submit(t){var e=this;return Object(a["a"])(function*(){let s=e.subject,o=e.message,n=e.fid,r=e.tid;yield e.submitReply({subject:s,message:o,fid:n,tid:r}),e.closeModal(t),setTimeout(()=>{sessionStorage.removeItem(e.url),location.reload(!0)},100)})()},closeModal(t){this.$emit("closeModal",t)}})},d=u,p=(s("15c6"),s("2877")),f=Object(p["a"])(d,r,i,!1,null,"3988671c",null),g=f.exports,m={props:["url","tid","fid"],components:{},data(){return{collections:[],isOpened:!1}},mounted(){this.collections=JSON.parse(localStorage.getItem("collections"))||[]},computed:{hasProgress(){return this.collections.filter(t=>{return t.tid==this.tid})[0]}},methods:{toggleclass(){this.isOpened=!this.isOpened},saveProgress(){let t=this.collections.findIndex(t=>{return t.tid==this.tid}),e={href:this.url,tid:this.tid,title:document.title,scrollTop:document.querySelector(".overflow-container").scrollTop};t>=0?this.collections.splice(t,1,e):this.collections.push(e),localStorage.setItem("collections",JSON.stringify(this.collections))},delProgress(){let t=this.collections.findIndex(t=>{return t.tid==this.tid});this.collections.splice(t,1),localStorage.setItem("collections",JSON.stringify(this.collections))},onReply(){const t=this.$createElement;this.$openModal({position:"bottom",maskClosable:!0,content:t(g,{attrs:{url:this.url,fid:this.fid,tid:this.tid}})}),this.toggleclass()},onReload(){sessionStorage.removeItem(this.url),location.reload(!0)}}},h=m,v=(s("ddf2"),Object(p["a"])(h,o,n,!1,null,"38ffb1f4",null));e["a"]=v.exports},ac6a:function(t,e,s){for(var o=s("cadf"),n=s("0d58"),r=s("2aba"),i=s("7726"),a=s("32e9"),c=s("84f2"),l=s("2b4c"),u=l("iterator"),d=l("toStringTag"),p=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=n(f),m=0;m<g.length;m++){var h,v=g[m],b=f[v],y=i[v],_=y&&y.prototype;if(_&&(_[u]||a(_,u,p),_[d]||a(_,d,v),c[v]=p,b))for(h in o)_[h]||r(_,h,o[h],!0)}},c5e7:function(t,e,s){},cadf:function(t,e,s){"use strict";var o=s("9c6c"),n=s("d53b"),r=s("84f2"),i=s("6821");t.exports=s("01f9")(Array,"Array",function(t,e){this._t=i(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,s=this._i++;return!t||s>=t.length?(this._t=void 0,n(1)):n(0,"keys"==e?s:"values"==e?t[s]:[s,t[s]])},"values"),r.Arguments=r.Array,o("keys"),o("values"),o("entries")},d53b:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},ddf2:function(t,e,s){"use strict";var o=s("453b"),n=s.n(o);n.a},fab2:function(t,e,s){var o=s("7726").document;t.exports=o&&o.documentElement}}]);