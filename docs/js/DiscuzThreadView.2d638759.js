(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DiscuzThreadView"],{"01f9":function(t,e,n){"use strict";var r=n("2d00"),s=n("5ca1"),o=n("2aba"),i=n("32e9"),a=n("84f2"),c=n("41a0"),l=n("7f20"),u=n("38fd"),p=n("2b4c")("iterator"),f=!([].keys&&"next"in[].keys()),d="@@iterator",g="keys",h="values",v=function(){return this};t.exports=function(t,e,n,m,b,y,_){c(n,e,m);var P,x,S,w=function(t){if(!f&&t in I)return I[t];switch(t){case g:return function(){return new n(this,t)};case h:return function(){return new n(this,t)}}return function(){return new n(this,t)}},L=e+" Iterator",O=b==h,T=!1,I=t.prototype,k=I[p]||I[d]||b&&I[b],N=k||w(b),C=b?O?w("entries"):N:void 0,j="Array"==e&&I.entries||k;if(j&&(S=u(j.call(new t)),S!==Object.prototype&&S.next&&(l(S,L,!0),r||"function"==typeof S[p]||i(S,p,v))),O&&k&&k.name!==h&&(T=!0,N=function(){return k.call(this)}),r&&!_||!f&&!T&&I[p]||i(I,p,N),a[e]=N,a[L]=v,b)if(P={values:O?N:w(h),keys:y?N:w(g),entries:C},_)for(x in P)x in I||o(I,x,P[x]);else s(s.P+s.F*(f||T),e,P);return P}},"05d9":function(t,e,n){},"0d58":function(t,e,n){var r=n("ce10"),s=n("e11e");t.exports=Object.keys||function(t){return r(t,s)}},1495:function(t,e,n){var r=n("86cc"),s=n("cb7c"),o=n("0d58");t.exports=n("9e1e")?Object.defineProperties:function(t,e){s(t);var n,i=o(e),a=i.length,c=0;while(a>c)r.f(t,n=i[c++],e[n]);return t}},"2aeb":function(t,e,n){var r=n("cb7c"),s=n("1495"),o=n("e11e"),i=n("613b")("IE_PROTO"),a=function(){},c="prototype",l=function(){var t,e=n("230e")("iframe"),r=o.length,s="<",i=">";e.style.display="none",n("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(s+"script"+i+"document.F=Object"+s+"/script"+i),t.close(),l=t.F;while(r--)delete l[c][o[r]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(a[c]=r(t),n=new a,a[c]=null,n[i]=t):n=l(),void 0===e?n:s(n,e)}},"333d":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pagination"},[t.prevUrl?n("a",{staticClass:"btn prev-btn",on:{click:function(e){t.gotoPage(t.prevUrl)}}},[t._v("上一页")]):t._e(),n("a",{staticClass:"btn currPageInfo"},[t._v(t._s(t.currPageNum+"/"+t.totalPageNum))]),t.nextUrl?n("a",{staticClass:"btn next-btn",on:{click:function(e){t.gotoPage(t.nextUrl)}}},[t._v("下一页")]):t._e()])},s=[],o=n("be94"),i=n("2f62"),a={props:["prevUrl","nextUrl","currPageNum","totalPageNum"],computed:Object(o["a"])({},Object(i["c"])(["targetHost"])),methods:{gotoPage(t){this.$router.push(encodeURIComponent(`${this.targetHost}${t}`))}}},c=a,l=(n("b741"),n("2877")),u=Object(l["a"])(c,r,s,!1,null,"f82b4964",null);u.options.__file="index.vue";e["a"]=u.exports},"38fd":function(t,e,n){var r=n("69a8"),s=n("4bf8"),o=n("613b")("IE_PROTO"),i=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=s(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?i:null}},"41a0":function(t,e,n){"use strict";var r=n("2aeb"),s=n("4630"),o=n("7f20"),i={};n("32e9")(i,n("2b4c")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(i,{next:s(1,n)}),o(t,e+" Iterator")}},"4bf8":function(t,e,n){var r=n("be13");t.exports=function(t){return Object(r(t))}},"4cc1":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"discuzThread-page"},[n("Menus",{attrs:{url:t.url}}),n("div",{staticClass:"overflow-container"},[n("ul",{staticClass:"thread"},t._l(t.postList,function(e,r){return n("li",{key:r,staticClass:"post"},[n("div",{staticClass:"post-info"},[n("span",[t._v(t._s(e.postFloor))]),n("span",[t._v(t._s(e.authorName))]),n("span",[t._v(t._s(e.authorLevel))]),n("div",{staticClass:"post-time"},[t._v(t._s(e.postTime))])]),n("h2",[t._v(t._s(e.postTitle))]),n("div",{staticClass:"post-content",domProps:{innerHTML:t._s(e.content)}})])}),0),t.isLoading?t._e():n("Pagination",{attrs:{currPageNum:t.pageInfo.currPageNum,totalPageNum:t.pageInfo.totalPageNum,prevUrl:t.prevUrl,nextUrl:t.pageInfo.nextUrl}})],1)],1)},s=[],o=(n("ac6a"),n("a481"),n("be94")),i=n("2f62"),a=(n("adb5"),n("333d")),c=n("aa9a"),l=n("dc16"),u={props:["url"],components:{Pagination:a["a"],Menus:c["a"]},data(){return{postList:[],pageInfo:{currPageNum:1,totalPageNum:1,nextPageNum:null,nextUrl:null}}},computed:Object(o["a"])({},Object(i["d"])(["isLoading","discuz"]),Object(i["c"])(["targetHost"]),{prevUrl(){let t="";return this.pageInfo&&1!=this.pageInfo.currPageNum&&this.url&&(t=this.url.replace(/.*bbs\//g,"").replace(/(\d*)\.html/,`${this.pageInfo.currPageNum-1}.html`)),t}}),async mounted(){await this.getThreadPageJson(this.url),this.$route.query.scrollTop&&this.$nextTick(()=>{document.querySelector(".overflow-container").scrollTop=this.$route.query.scrollTop})},beforeMount(){},destroyed(){},async beforeRouteUpdate(t,e,n){n(),await this.getThreadPageJson(t.params.url),document.querySelector(".overflow-container").scrollTop=0},methods:Object(o["a"])({},mapActions(["getPageData"]),{async getThreadPageJson(t){let e={};if(sessionStorage.getItem(t))e=JSON.parse(sessionStorage.getItem(t));else{let n=l["a"].thread;e=await this.getPageData({url:t,selector:n}),sessionStorage.setItem(t,JSON.stringify(e))}document.title=e.documentTitle,e.pageInfo&&(this.pageInfo=e.pageInfo),this.postList=e.postList,this.postList.forEach(t=>{t.content=t.content.replace(/="attachment/g,`="${this.targetHost}attachment`).replace(/="images/g,`="${this.targetHost}images`).replace(/="http:\/\/(.*)\/bbs\//g,`="${this.targetHost}`).replace(/="(viewthread|thread.*)" target/g,(t,e,n,r)=>{return`="/xgj/discuz/thread/${encodeURIComponent(this.targetHost+e)}" target`}).replace(/:14pt/g,":5vw")})}})},p=u,f=(n("602e"),n("2877")),d=Object(f["a"])(p,r,s,!1,null,null,null);d.options.__file="thread.vue";e["default"]=d.exports},"51a2":function(t,e,n){},"5ca1":function(t,e,n){var r=n("7726"),s=n("8378"),o=n("32e9"),i=n("2aba"),a=n("9b43"),c="prototype",l=function(t,e,n){var u,p,f,d,g=t&l.F,h=t&l.G,v=t&l.S,m=t&l.P,b=t&l.B,y=h?r:v?r[e]||(r[e]={}):(r[e]||{})[c],_=h?s:s[e]||(s[e]={}),P=_[c]||(_[c]={});for(u in h&&(n=e),n)p=!g&&y&&void 0!==y[u],f=(p?y:n)[u],d=b&&p?a(f,r):m&&"function"==typeof f?a(Function.call,f):f,y&&i(y,u,f,t&l.U),_[u]!=f&&o(_,u,d),m&&P[u]!=f&&(P[u]=f)};r.core=s,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},"602e":function(t,e,n){"use strict";var r=n("51a2"),s=n.n(r);s.a},"65f8":function(t,e,n){"use strict";var r=n("9449"),s=n.n(r);s.a},"7f20":function(t,e,n){var r=n("86cc").f,s=n("69a8"),o=n("2b4c")("toStringTag");t.exports=function(t,e,n){t&&!s(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},"84f2":function(t,e){t.exports={}},9449:function(t,e,n){},"9c6c":function(t,e,n){var r=n("2b4c")("unscopables"),s=Array.prototype;void 0==s[r]&&n("32e9")(s,r,{}),t.exports=function(t){s[r][t]=!0}},aa9a:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{class:t.isOpened&&"opened"},[n("svg",{staticStyle:{position:"absolute",width:"0",height:"0"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[n("defs",[n("symbol",{attrs:{id:"icon-close",viewBox:"0 0 32 32"}},[n("title",[t._v("close")]),n("path",{attrs:{d:"M17.387 16l8.907-8.907c0.373-0.373 0.373-1.013 0-1.44-0.373-0.373-1.013-0.373-1.387 0l-8.907 8.907-8.907-8.853c-0.373-0.373-1.013-0.373-1.44 0-0.373 0.373-0.373 1.013 0 1.387l8.907 8.907-8.907 8.907c-0.373 0.373-0.373 1.013 0 1.44 0.373 0.373 1.013 0.373 1.387 0l8.907-8.907 8.907 8.907c0.373 0.373 1.013 0.373 1.387 0 0 0 0 0 0 0 0.373-0.373 0.373-1.013 0-1.44l-8.853-8.907z"}})])])]),n("a",{staticClass:"btn-menu",on:{click:t.toggleclass}},[n("svg",[n("use",{attrs:{"xlink:href":"#icon-close"}})])]),n("li",[n("span",{on:{click:t.saveReadProgress}},[t._v("收藏")])]),t.readProgress?n("li",[n("span",{on:{click:t.deleteReadProgress}},[t._v("删除")])]):t._e()])},s=[],o=(n("28a5"),n("a481"),{props:["url"],data(){return{collections:[],isOpened:!1}},mounted(){this.collections=JSON.parse(localStorage.getItem("collections"))||[]},computed:{tid(){return this.url.includes("redirect.php?goto")?this.url.replace(/^redirect.*ptid=/g,""):this.url.split("-")[1]},readProgress(){return this.collections.filter(t=>{return t.tid==this.tid})[0]}},methods:{toggleclass(){this.isOpened=!this.isOpened},saveReadProgress(){let t=this.collections.findIndex(t=>{return t.tid==this.tid}),e={href:this.url,tid:this.tid,title:document.title,scrollTop:document.querySelector(".overflow-container").scrollTop};t>=0?this.collections.splice(t,1,e):this.collections.push(e),localStorage.setItem("collections",JSON.stringify(this.collections))},deleteReadProgress(){let t=this.collections.findIndex(t=>{return t.tid==this.tid});this.collections.splice(t,1),localStorage.setItem("collections",JSON.stringify(this.collections))}}}),i=o,a=(n("65f8"),n("2877")),c=Object(a["a"])(i,r,s,!1,null,"0039b2a0",null);c.options.__file="index.vue";e["a"]=c.exports},ac6a:function(t,e,n){for(var r=n("cadf"),s=n("0d58"),o=n("2aba"),i=n("7726"),a=n("32e9"),c=n("84f2"),l=n("2b4c"),u=l("iterator"),p=l("toStringTag"),f=c.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=s(d),h=0;h<g.length;h++){var v,m=g[h],b=d[m],y=i[m],_=y&&y.prototype;if(_&&(_[u]||a(_,u,f),_[p]||a(_,p,m),c[m]=f,b))for(v in r)_[v]||o(_,v,r[v],!0)}},b741:function(t,e,n){"use strict";var r=n("05d9"),s=n.n(r);s.a},cadf:function(t,e,n){"use strict";var r=n("9c6c"),s=n("d53b"),o=n("84f2"),i=n("6821");t.exports=n("01f9")(Array,"Array",function(t,e){this._t=i(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,s(1)):s(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},d53b:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},fab2:function(t,e,n){var r=n("7726").document;t.exports=r&&r.documentElement}}]);
//# sourceMappingURL=DiscuzThreadView.2d638759.js.map