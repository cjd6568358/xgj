(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DiscuzMyView"],{"0e50":function(t,e,i){"use strict";i("a5b0")},4513:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"discuzMy-page"},[i("div",{staticClass:"overflow-container"},[i("ul",{staticClass:"user-info"},[i("li",[t._v("用户名:"+t._s(t.discuz.userInfo.username))]),t.discuz.signInfo.isSigned?i("li",[t._v(" 签到状态:"+t._s(t.discuz.signInfo.isSigned?"已签到":"未签到")+" ")]):t._e(),t._l(t.creditList,(function(e){return i("li",{key:e},[t._v(t._s(e))])}))],2),i("ul",{staticClass:"area",attrs:{"data-title":"我的收藏"}},[t._l(t.collections,(function(e,s){return[e?i("li",{key:s},[i("router-link",{attrs:{to:{name:"DiscuzThreadView",params:{url:e.href},query:{scrollTop:e.scrollTop,tid:e.tid}}}},[t._v(t._s(e.title))])],1):t._e()]}))],2),i("ul",{staticClass:"area",attrs:{"data-title":"最近回复"}},[t._l(t.recentReply,(function(e,s){return[e?i("router-link",{key:s,attrs:{to:{name:"DiscuzThreadView",params:{url:e.href}},tag:"li"}},[t._v(t._s(e.title))]):t._e()]}))],2),i("ul",{staticClass:"area",attrs:{"data-title":"最近主题"}},[t._l(t.recentTopics,(function(e,s){return[e?i("router-link",{key:s,attrs:{to:{name:"DiscuzThreadView",params:{url:e.href}},tag:"li"}},[t._v(t._s(e.title))]):t._e()]}))],2)])])},a=[],n=(i("5319"),i("2f62")),r=(i("adb5"),i("4260")),c={name:"discuz-page",components:{},data(){return{collections:[],creditList:[],recentReply:[],recentTopics:[]}},computed:{...Object(n["d"])(["isLoading","discuz"]),...Object(n["c"])(["targetHost"])},mounted(){this.init()},beforeMount(){},destroyed(){},methods:{...Object(n["b"])(["getPageData"]),async init(){this.discuz.isLogin?(await this.getMyPageData(),this.collections=JSON.parse(localStorage.getItem("collections"))||[]):this.$router.replace("/index")},async getMyPageData(){let{targetHost:t,discuz:{userInfo:e,signInfo:i}}=this,s=t+"my.php",a=r["l"].my,n=await this.getPageData({url:s,selector:a});e.username=n.username,this.creditList=n.creditList,this.recentReply=n.recentReply,this.recentTopics=n.recentTopics,this.recentTopics&&this.recentTopics.forEach(t=>{t&&t.title==`${n.username}/${(new Date).getMonth()+1}月份/打卡签到帖`&&(t.lastPost.includes((new Date).Format("yyyy-M-d"))?i.isSigned=!0:i.tid=t.tid)})},onlongpress(t){if(confirm("确定删除该收藏吗")){let e=this.collections.findIndex(e=>e===t);this.collections.splice(e,1),localStorage.setItem("collections",JSON.stringify(this.collections))}}}},l=c,o=(i("0e50"),i("2877")),u=Object(o["a"])(l,s,a,!1,null,"046a9990",null);e["default"]=u.exports},a5b0:function(t,e,i){}}]);