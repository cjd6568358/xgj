(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DiscuzView"],{"1fee":function(e,t,i){"use strict";var n=i("f6fc"),s=i.n(n);s.a},ac6a:function(e,t,i){for(var n=i("cadf"),s=i("0d58"),r=i("2aba"),a=i("7726"),o=i("32e9"),c=i("84f2"),u=i("2b4c"),l=u("iterator"),d=u("toStringTag"),m=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=s(p),f=0;f<g.length;f++){var h,S=g[f],v=p[S],w=a[S],b=w&&w.prototype;if(b&&(b[l]||o(b,l,m),b[d]||o(b,d,S),c[S]=m,v))for(h in n)b[h]||r(b,h,n[h],!0)}},bb62:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"discuz-page"},[i("div",{staticClass:"overflow-container",on:{scroll:e.onScroll}},[e.discuz.isLogin?e._e():i("div",{staticClass:"login-form"},[i("center",[i("h3",[e._v("discuz论坛手机版")])]),i("div",{staticClass:"input-warp"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.webSite,expression:"webSite"}],attrs:{name:"",id:"",placeholder:"请选择站点"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.webSite=t.target.multiple?i:i[0]}}},e._l(e.discuz.webSiteList,function(t){return i("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}),0),i("a",{staticClass:"btn",on:{click:e.updateWebSiteList}},[e._v("更新列表")])]),i("div",{staticClass:"input-warp"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.username,expression:"userInfo.username"}],attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:e.userInfo.username},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"username",t.target.value)}}})]),i("div",{staticClass:"input-warp"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.password,expression:"userInfo.password"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:e.userInfo.password},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"password",t.target.value)}}})]),i("div",{staticClass:"input-warp"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.QA,expression:"userInfo.QA"}],attrs:{type:"text",placeholder:"请输入问题ID和答案(以逗号分隔)"},domProps:{value:e.userInfo.QA},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"QA",t.target.value)}}})]),i("a",{staticClass:"btn",on:{click:e.login}},[e._v("登录")])],1),e.discuz.isLogin?[i("ul",{staticClass:"user-info"},[i("router-link",{attrs:{to:{name:"DiscuzMyView"},tag:"li"}},[e._v(e._s(e.discuz.userInfo.username))]),e.discuz.signInfo.isSigned?i("li",[e._v("已签到")]):i("li",{on:{click:e.dailySignIn}},[e._v("日签到")]),i("li",{on:{click:e.monthSignIn}},[e._v("月签到")]),i("li",{on:{click:e.logout}},[e._v("退出")])],1),e._l(e.areaList,function(t,n){return i("ul",{key:n,staticClass:"area",attrs:{"data-title":t.name}},e._l(t.value,function(t,n){return i("router-link",{key:n,attrs:{to:{name:"DiscuzForumView",params:{url:e.targetHost+t.value}},tag:"li"}},[e._v(e._s(t.name))])}),1)})]:e._e(),i("a",{staticClass:"btn switch",on:{click:e.switchProxy}},[e._v("切换代理源("+e._s(e.proxyServerPlatom)+")")])],2)])},s=[],r=(i("a481"),i("6762"),i("2fdb"),i("ac6a"),i("28a5"),i("96cf"),i("3b8d")),a=i("cebc"),o=i("2f62"),c=i("adb5"),u=i("b383"),l=i.n(u),d=i("4260"),m=i("dc16"),p=i("db49"),g={name:"discuz-page",components:{},data:function(){return{areaList:[],userInfo:{username:"",password:"",QA:""}}},computed:Object(a["a"])({},Object(o["d"])(["isLoading","discuz"]),Object(o["c"])(["targetHost"]),{webSite:{get:function(){return this.discuz.webSite},set:function(e){this.$store.commit("UPDATE_DISCUZ",{webSite:e})}},proxyServerPlatom:function(){var e=this;return p["a"].filter(function(t){return t.host===e.discuz.HOST})[0].platom}}),mounted:function(){},activated:function(){this.init(),console.log("isLogin:",this.discuz.isLogin,this.discuz.HOST),document.querySelector(".overflow-container").scrollTop=sessionStorage.getItem("homePage")||0},beforeMount:function(){},destroyed:function(){},methods:Object(a["a"])({},Object(o["b"])(["switchProxy","logout","submitPost","dailySignIn","monthSignIn","getPageData"]),{init:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,i,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.discuz,i=t.isLogin,n=t.signInfo,s=t.webSiteList,i?(n.isSigned||this.checkSigned(),this.getIndexPageData()):s.length||this.updateWebSiteList();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),login:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,i,n,s,r,a,o,u,m,p,g,f,h;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.targetHost,i=this.discuz.HOST,n=this.userInfo,s=n.username,r=n.password,a=n.QA,!s||!r){e.next=18;break}return o=a.split(","),u=o.length>1&&o[0]||null,m=o.length>1&&o[1]||null,p={formhash:"30b7da0e",cookietime:"315360000",loginfield:"username",questionid:u,answer:m,username:s,password:r,userlogin:"true"},u&&m||(delete p.questionid,delete p.answer),g={httpConfig:{url:"".concat(t,"logging.php?action=login&loginsubmit=true"),method:"post",responseType:"arraybuffer",data:l.a.stringify(p)},encoding:"gbk"},this.$store.commit("SET_LOADING_STATUS",!0),e.next=11,c["a"].post("".concat(i,"/api/advancedProxy"),g);case 11:f=e.sent,h=f.headers,this.$store.commit("SET_LOADING_STATUS",!1),h.corscookies&&h.corscookies.split("|$$|").forEach(function(e){document.cookie=e}),this.$store.commit("UPDATE_DISCUZ",{isLogin:!!Object(d["e"])("cdb3_auth")}),this.checkSigned(),this.getIndexPageData();case 18:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),checkSigned:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,i,n,s,r,a,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.targetHost,i=this.discuz.signInfo,n="".concat(t,"my.php"),s=m["a"].my,e.next=5,this.getPageData({url:n,selector:s});case 5:r=e.sent,a=r.formhash,o=r.username,r.recentReply,c=r.recentTopics,this.discuz.formhash=a,c&&c.forEach(function(e){e&&e.title=="".concat(o,"/").concat((new Date).getMonth()+1,"月份/打卡签到帖")&&(e.lastPost.includes((new Date).Format("yyyy-M-d"))?i.isSigned=!0:i.tid=e.tid)});case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getIndexPageData:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,i,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t="".concat(this.targetHost,"index.php"),i=m["a"].index,n={},!sessionStorage.getItem(t)){e.next=7;break}n=JSON.parse(sessionStorage.getItem(t)),e.next=11;break;case 7:return e.next=9,this.getPageData({url:t,selector:i});case 9:n=e.sent,sessionStorage.setItem(t,JSON.stringify(n));case 11:this.areaList=n.areaList,s=Object.assign({},this.discuz.userInfo),s.creditList=n.creditList,s.username=n.username,this.$store.commit("UPDATE_DISCUZ",{userInfo:s}),n.username||this.logout();case 17:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),updateWebSiteList:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,i,n,s,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=p["a"].filter(function(e){return e.gfw}),i=t[Math.floor(Math.random()*t.length)].host,n="http://www.oznewspaper.com/",s=m["a"].webSiteList,e.next=6,this.getPageData({url:n,selector:s,HOST:i});case 6:r=e.sent,a=[],r.webSiteList.forEach(function(e){a.push(e.replace("\n","").replace(/ .*/g,""))}),localStorage.setItem("webSiteList",JSON.stringify(a)),this.$store.commit("UPDATE_DISCUZ",{webSiteList:a});case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),onScroll:function(e){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){sessionStorage.setItem("homePage",e.target.scrollTop)},100)}})},f=g,h=(i("1fee"),i("2877")),S=Object(h["a"])(f,n,s,!1,null,"5b03c923",null);t["default"]=S.exports},f6fc:function(e,t,i){}}]);