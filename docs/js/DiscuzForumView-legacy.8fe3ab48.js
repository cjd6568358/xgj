(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DiscuzForumView"],{2347:function(e,t,n){"use strict";n("4e13")},"333d":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pagination"},[e.prevUrl?n("a",{staticClass:"btn prev-btn",on:{click:function(t){return e.gotoPage(e.prevUrl)}}},[e._v("上一页")]):e._e(),n("a",{staticClass:"btn currPageInfo"},[e._v(e._s(e.currPageNum+"/"+e.totalPageNum))]),e.nextUrl?n("a",{staticClass:"btn next-btn",on:{click:function(t){return e.gotoPage(e.nextUrl)}}},[e._v("下一页")]):e._e()])},o=[],s=(n("99af"),n("5530")),a=n("2f62"),i={props:["prevUrl","nextUrl","currPageNum","totalPageNum"],computed:Object(s["a"])({},Object(a["c"])(["targetHost"])),methods:{gotoPage:function(e){console.log("".concat(this.targetHost).concat(e)),this.$router.push(encodeURIComponent("".concat(this.targetHost).concat(e)))}}},c=i,l=(n("8d3b"),n("2877")),u=Object(l["a"])(c,r,o,!1,null,"23236df1",null);t["a"]=u.exports},"4e13":function(e,t,n){},"4fea":function(e,t,n){"use strict";n("a952")},"820c":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"discuzForum-page"},[n("Menus",{attrs:{url:e.url}}),n("div",{staticClass:"overflow-container",on:{touchmove:e.onScroll}},[e._l(e.forumList,(function(t,r){return n("ul",{key:r,staticClass:"area",attrs:{"data-title":t.name}},[e._l(t.value,(function(t,r){return["投票"!=t.type?n("router-link",{key:r,attrs:{to:{name:"DiscuzThreadView",params:{url:e.targetHost+t.href}},tag:"li"}},[e._v(" ["+e._s(t.date)+"] "+e._s(t.title)+" "),t.permission?[e._v("[阅读权限"+e._s(t.permission)+"]")]:e._e(),e._v(" ♥"+e._s(t.thanks)+" ("+e._s(t.nums)+") ")],2):e._e()]}))],2)})),e.isLoading?e._e():n("Pagination",{attrs:{currPageNum:e.pageInfo.currPageNum,totalPageNum:e.pageInfo.totalPageNum,prevUrl:e.prevUrl,nextUrl:e.pageInfo.nextUrl}})],2)],1)},o=[],s=(n("ac1f"),n("5319"),n("96cf"),n("1da1")),a=n("5530"),i=n("2f62"),c=(n("adb5"),n("333d")),l=n("aa9a"),u=n("dc16"),m={props:["url"],components:{Pagination:c["a"],Menus:l["a"]},data:function(){return{forumList:[],pageInfo:{currPageNum:1,totalPageNum:1,nextPageNum:null,nextUrl:null}}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(i["d"])(["isLoading","discuz"])),Object(i["c"])(["targetHost"])),{},{prevUrl:function(){var e="";return this.pageInfo&&1!=this.pageInfo.currPageNum&&this.url&&(e=this.url.replace(/.*bbs\//g,"").replace(/(\d*)\.html/,"".concat(this.pageInfo.currPageNum-1,".html"))),e}}),mounted:function(){return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},beforeRouteUpdate:function(e,t,n){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n(),t.next=3,r.getForumPageData(e.params.url);case 3:document.querySelector(".overflow-container").scrollTop=sessionStorage.getItem(e.params.url+"_scrollTop")||0;case 4:case"end":return t.stop()}}),t)})))()},activated:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getForumPageData(e.url);case 2:document.querySelector(".overflow-container").scrollTop=sessionStorage.getItem(e.url+"_scrollTop")||0;case 3:case"end":return t.stop()}}),t)})))()},beforeMount:function(){},destroyed:function(){},methods:Object(a["a"])(Object(a["a"])({},Object(i["b"])(["getPageData"])),{},{getForumPageData:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r={},!sessionStorage.getItem(e)){n.next=5;break}r=JSON.parse(sessionStorage.getItem(e)),n.next=10;break;case 5:return o=u["a"].forum,n.next=8,t.getPageData({url:e,selector:o});case 8:r=n.sent,sessionStorage.setItem(e,JSON.stringify(r));case 10:t.forumList=r.forumList,t.pageInfo=r.pageInfo,document.title=r.documentTitle;case 13:case"end":return n.stop()}}),n)})))()},onScroll:function(){var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){sessionStorage.setItem(e.url+"_scrollTop",document.querySelector(".overflow-container").scrollTop)}),500)}})},d=m,f=(n("2347"),n("2877")),g=Object(f["a"])(d,r,o,!1,null,"9a502d56",null);t["default"]=g.exports},"8d3b":function(e,t,n){"use strict";n("c8ef")},a224:function(e,t,n){},a434:function(e,t,n){"use strict";var r=n("23e7"),o=n("23cb"),s=n("a691"),a=n("50c4"),i=n("7b0b"),c=n("65f0"),l=n("8418"),u=n("1dde"),m=n("ae40"),d=u("splice"),f=m("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,p=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!f},{splice:function(e,t){var n,r,u,m,d,f,b=i(this),w=a(b.length),_=o(e,w),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=w-_):(n=x-2,r=p(g(s(t),0),w-_)),w+n-r>h)throw TypeError(v);for(u=c(b,r),m=0;m<r;m++)d=_+m,d in b&&l(u,m,b[d]);if(u.length=r,n<r){for(m=_;m<w-r;m++)d=m+r,f=m+n,d in b?b[f]=b[d]:delete b[f];for(m=w;m>w-r+n;m--)delete b[m-1]}else if(n>r)for(m=w-r;m>_;m--)d=m+r-1,f=m+n-1,d in b?b[f]=b[d]:delete b[f];for(m=0;m<n;m++)b[m+_]=arguments[m+2];return b.length=w-r+n,u}})},a952:function(e,t,n){},aa9a:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{class:e.isOpened&&"opened"},[n("svg",{staticStyle:{position:"absolute",width:"0",height:"0"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[n("defs",[n("symbol",{attrs:{id:"icon-close",viewBox:"0 0 32 32"}},[n("title",[e._v("close")]),n("path",{attrs:{d:"M17.387 16l8.907-8.907c0.373-0.373 0.373-1.013 0-1.44-0.373-0.373-1.013-0.373-1.387 0l-8.907 8.907-8.907-8.853c-0.373-0.373-1.013-0.373-1.44 0-0.373 0.373-0.373 1.013 0 1.387l8.907 8.907-8.907 8.907c-0.373 0.373-0.373 1.013 0 1.44 0.373 0.373 1.013 0.373 1.387 0l8.907-8.907 8.907 8.907c0.373 0.373 1.013 0.373 1.387 0 0 0 0 0 0 0 0.373-0.373 0.373-1.013 0-1.44l-8.853-8.907z"}})])])]),n("a",{staticClass:"btn-menu",on:{click:e.toggleclass}},[n("svg",[n("use",{attrs:{"xlink:href":"#icon-close"}})])]),n("li",[n("span",{on:{click:e.saveProgress}},[e._v("收藏")])]),e.hasProgress?n("li",[n("span",{on:{click:e.delProgress}},[e._v("删除")])]):e._e(),e.tid&&e.fid?n("li",[n("span",{on:{click:e.onReply}},[e._v("回复")])]):e._e(),n("li",[n("span",{on:{click:e.onReload}},[e._v("刷新")])])])},o=[],s=(n("4de4"),n("c740"),n("a434"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reply-modal"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.subject,expression:"subject"}],attrs:{type:"text",placeholder:"选填,请输入标题"},domProps:{value:e.subject},on:{input:function(t){t.target.composing||(e.subject=t.target.value)}}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"必填,请输入最少20个字内容"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),n("ul",[n("li",{staticClass:"btn submit",on:{click:e.submit}},[e._v("提交")]),n("li",{staticClass:"btn cancel",on:{click:e.closeModal}},[e._v("取消")])])])}),a=[],i=(n("96cf"),n("1da1")),c=n("5530"),l=n("2f62"),u={props:["url","fid","tid"],data:function(){return{subject:"",message:""}},destroyed:function(){},methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["submitReply"])),{},{submit:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,o,s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.subject,o=t.message,s=t.fid,a=t.tid,n.next=3,t.submitReply({subject:r,message:o,fid:s,tid:a});case 3:t.closeModal(e),setTimeout((function(){sessionStorage.removeItem(t.url),location.reload(!0)}),100);case 5:case"end":return n.stop()}}),n)})))()},closeModal:function(e){this.$emit("closeModal",e)}})},m=u,d=(n("4fea"),n("2877")),f=Object(d["a"])(m,s,a,!1,null,"27d82ad3",null),g=f.exports,p={props:["url","tid","fid"],components:{},data:function(){return{collections:[],isOpened:!1}},mounted:function(){this.collections=JSON.parse(localStorage.getItem("collections"))||[]},computed:{hasProgress:function(){var e=this;return this.collections.filter((function(t){return t.tid==e.tid}))[0]}},methods:{toggleclass:function(){this.isOpened=!this.isOpened},saveProgress:function(){var e=this,t=this.collections.findIndex((function(t){return t.tid==e.tid})),n={href:this.url,tid:this.tid,title:document.title,scrollTop:document.querySelector(".overflow-container").scrollTop};t>=0?this.collections.splice(t,1,n):this.collections.push(n),localStorage.setItem("collections",JSON.stringify(this.collections))},delProgress:function(){var e=this,t=this.collections.findIndex((function(t){return t.tid==e.tid}));this.collections.splice(t,1),localStorage.setItem("collections",JSON.stringify(this.collections))},onReply:function(){var e=this.$createElement;this.$openModal({position:"bottom",maskClosable:!0,content:e(g,{attrs:{url:this.url,fid:this.fid,tid:this.tid}})}),this.toggleclass()},onReload:function(){sessionStorage.removeItem(this.url),location.reload(!0)}}},h=p,v=(n("b757"),Object(d["a"])(h,r,o,!1,null,"a1a32424",null));t["a"]=v.exports},b757:function(e,t,n){"use strict";n("a224")},c8ef:function(e,t,n){}}]);