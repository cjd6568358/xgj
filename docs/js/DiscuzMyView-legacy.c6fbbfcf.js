(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DiscuzMyView"],{4513:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"discuzMy-page"},[n("div",{staticClass:"overflow-container"},[n("ul",{staticClass:"user-info"},[n("li",[t._v("用户名:"+t._s(t.discuz.userInfo.username))]),t.discuz.signInfo.isSigned?n("li",[t._v("签到状态:"+t._s(t.discuz.signInfo.isSigned?"已签到":"未签到"))]):t._e(),t._l(t.creditList,function(e){return n("li",{key:e},[t._v(t._s(e))])})],2),n("ul",{staticClass:"area",attrs:{"data-title":"我的收藏"}},[t._l(t.collections,function(e,i){return[e?n("li",{key:i},[n("router-link",{attrs:{to:{name:"DiscuzThreadView",params:{url:e.href},query:{scrollTop:e.scrollTop}}}},[t._v(t._s(e.title))])],1):t._e()]})],2),n("ul",{staticClass:"area",attrs:{"data-title":"最近回复"}},[t._l(t.recentReply,function(e,i){return[e?n("router-link",{key:i,attrs:{to:{name:"DiscuzThreadView",params:{url:t.targetHost+e.href}},tag:"li"}},[t._v(t._s(e.title))]):t._e()]})],2),n("ul",{staticClass:"area",attrs:{"data-title":"最近主题"}},[t._l(t.recentTopics,function(e,i){return[e?n("router-link",{key:i,attrs:{to:{name:"DiscuzThreadView",params:{url:t.targetHost+e.href}},tag:"li"}},[t._v(t._s(e.title))]):t._e()]})],2)])])},a=[],r=(n("6762"),n("2fdb"),n("ac6a"),n("a481"),n("96cf"),n("1da1")),s=n("be94"),o=n("2f62"),c=n("adb5"),l=n("dc16"),u={name:"discuz-page",components:{},data:function(){return{collections:[],creditList:[],recentReply:[],recentTopics:[]}},computed:Object(s["a"])({},Object(o["d"])(["isLoading","discuz"]),Object(o["c"])(["targetHost"])),mounted:function(){this.init()},beforeMount:function(){},destroyed:function(){},methods:{init:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.discuz.isLogin){t.next=6;break}return t.next=3,this.getMyPageJson();case 3:this.collections=JSON.parse(localStorage.getItem("collections"))||[],t.next=7;break;case 6:this.$router.replace("/index");case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getMyPageJson:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,i,a,r,s,o,u;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.targetHost,n=this.discuz,i=n.userInfo,a=n.HOST,r=n.signInfo,s={httpConfig:{url:"".concat(e,"my.php"),method:"get",responseType:"arraybuffer"},encoding:"gbk",selector:l["a"].my},this.$store.commit("SET_LOADING_STATUS",!0),t.next=5,c["a"].post("".concat(a,"/api/html2Json"),s);case 5:o=t.sent,u=o.data.data,this.$store.commit("SET_LOADING_STATUS",!1),i.username=u.username,this.creditList=u.creditList,this.recentReply=u.recentReply,this.recentTopics=u.recentTopics,this.recentTopics&&this.recentTopics.forEach(function(t){t&&t.title=="".concat(u.username,"/").concat((new Date).getMonth()+1,"月份/打卡签到帖")&&(t.lastPost.includes((new Date).Format("yyyy-M-d"))?r.isSigned=!0:r.tid=t.tid)});case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},h=u,d=(n("a957"),n("2877")),m=Object(d["a"])(h,i,a,!1,null,"4066e92a",null);m.options.__file="my.vue";e["default"]=m.exports},a957:function(t,e,n){"use strict";var i=n("be5f"),a=n.n(i);a.a},ac6a:function(t,e,n){for(var i=n("cadf"),a=n("0d58"),r=n("2aba"),s=n("7726"),o=n("32e9"),c=n("84f2"),l=n("2b4c"),u=l("iterator"),h=l("toStringTag"),d=c.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=a(m),p=0;p<f.length;p++){var g,$=f[p],b=m[$],y=s[$],L=y&&y.prototype;if(L&&(L[u]||o(L,u,d),L[h]||o(L,h,$),c[$]=d,b))for(g in i)L[g]||r(L,g,i[g],!0)}},be5f:function(t,e,n){},dc16:function(t,e,n){"use strict";n("cadf"),n("551c"),n("097d");e["a"]={webSiteList:"\n    li@webSiteList{\n        &{$}\n    };\n    ",index:"\n    .mainbox.forumlist@areaList{\n        h3 a{$name};\n        tbody:has(.lastpost a)@value{\n            h2 a[href=$value]{$name}\n        }\n    };\n    #creditlist_menu>li@creditList{\n        &{$}\n    };\n    #creditlist{$username}\n    ",forum:"\n    filter MathCeil() {\n        return Math.ceil(this/10)\n    };\n    head title{$documentTitle};\n    table:has(thead.separation)@forumList{\n        thead.separation td b{$name};\n        tbody:has(th)@value{\n            th span[id^=thread_] a[href=$href]{$title};\n            .nums{$nums};\n            td.icon img[alt=$type];\n            span.bold{$permission|Number}\n            .author cite{html($thanks|replace(/<a(.*)absmiddle\">/g,'')|Number)}\n        }\n    };\n    .mainbox.threadlist+.pages_btns .pages@pageInfo|pack{\n        $currPageNum = 1;\n        $totalPageNum = 1;\n        $nextPageNum = null;\n        $nextUrl = null;\n        strong{$currPageNum|Number};\n        strong+a[href=$nextUrl]{$nextPageNum|Number};\n        em{$totalPageNum|Number|MathCeil};\n    }\n    ",thread:"\n    filter MathCeil() {\n        return Math.ceil(this/10)\n    };\n    form input[name=formhash][value=$formhash];\n    form #ajax_favorite[href=$tid|replace(/^my.php.*tid=/g,'')];\n    head title{$documentTitle};\n    form .mainbox.viewthread@postList{\n        .postauthor cite a[id^=userinfo]{$authorName};\n        .postauthor p:nth-of-type(1){$authorLevel};\n        // .postauthor .profile{$authorProfile}\n        .postcontent .postinfo strong[id=$pid|replace(/postnum_/g,'')][onclick=$absPostUrl|replace(/',.*/g,'')|match(/viewth.*/g)|first]{$postFloor}\n        .postcontent .postinfo{find('小',$postTime, '只看该作者')}\n        .postcontent .postmessage>h2{html($postTitle)}\n        .postcontent .postmessage .t_msgfont{html($content|replace(/border(.*)alt=\"\"/g,\"\"))}\n    };\n    form+.pages_btns .pages@pageInfo|pack{\n        $currPageNum = 1;\n        $totalPageNum = 1;\n        $nextPageNum = null;\n        $nextUrl = null;\n        strong{$currPageNum|Number};\n        strong+a[href=$nextUrl]{$nextPageNum|Number};\n        em{$totalPageNum|Number|MathCeil};\n    }\n    ",my:"\n    .credits_info ul>li@creditList{\n        &{$|trim()}\n    };\n    #wrapper #menu ul li:nth-child(2) a[href=$formhash|split('formhash=')|slice(1,2)|first];\n    #menu li cite a{$username};\n    .mainbox table:nth-of-type(1) tbody tr@recentTopics{\n        td:nth-child(1) a[href=$href]{$title}\n        td:nth-child(1) a[href=$tid|split('-')|slice(1,2)|first];\n        td:nth-child(2){$forum}\n        td:nth-child(3) a[href=$lastPostUrl]{$lastPost}\n        td:nth-child(4){$status}\n    };\n    .mainbox table:nth-of-type(2) tbody tr@recentReply{\n        td:nth-child(1) a[href=$href]{$title}\n        td:nth-child(1) a[href=$tid|replace(/^redirect.*ptid=/g,'')];\n        td:nth-child(2){$forum}\n        td:nth-child(3){$lastPost}\n        td:nth-child(4){$status}\n    }\n    "}}}]);
//# sourceMappingURL=DiscuzMyView-legacy.c6fbbfcf.js.map