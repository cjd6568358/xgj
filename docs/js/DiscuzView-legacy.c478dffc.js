(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DiscuzView"],{"391e":function(t,e,n){},ac6a:function(t,e,n){for(var i=n("cadf"),s=n("0d58"),r=n("2aba"),a=n("7726"),o=n("32e9"),c=n("84f2"),u=n("2b4c"),l=u("iterator"),d=u("toStringTag"),m=c.Array,g={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=s(g),f=0;f<p.length;f++){var h,S=p[f],v=g[S],w=a[S],b=w&&w.prototype;if(b&&(b[l]||o(b,l,m),b[d]||o(b,d,S),c[S]=m,v))for(h in i)b[h]||r(b,h,i[h],!0)}},bb62:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"discuz-page"},[n("div",{staticClass:"overflow-container",on:{scroll:t.onScroll}},[t.discuz.isLogin?t._e():n("div",{staticClass:"login-form"},[n("center",[n("h3",[t._v("discuz论坛手机版")])]),n("div",{staticClass:"input-warp"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.webSite,expression:"webSite"}],attrs:{name:"",id:"",placeholder:"请选择站点"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.webSite=e.target.multiple?n:n[0]}}},t._l(t.discuz.webSiteList,function(e){return n("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}),0),n("a",{staticClass:"btn",on:{click:t.updateWebSiteList}},[t._v("更新列表")])]),n("div",{staticClass:"input-warp"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.username,expression:"userInfo.username"}],attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:t.userInfo.username},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"username",e.target.value)}}})]),n("div",{staticClass:"input-warp"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.password,expression:"userInfo.password"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.userInfo.password},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"password",e.target.value)}}})]),n("div",{staticClass:"input-warp"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.QA,expression:"userInfo.QA"}],attrs:{type:"text",placeholder:"请输入问题ID和答案(以逗号分隔)"},domProps:{value:t.userInfo.QA},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"QA",e.target.value)}}})]),n("a",{staticClass:"btn",on:{click:t.login}},[t._v("登录")])],1),t.discuz.isLogin?[n("ul",{staticClass:"user-info"},[n("router-link",{attrs:{to:{name:"DiscuzMyView"},tag:"li"}},[t._v(t._s(t.discuz.userInfo.username))]),t.discuz.signInfo.isSigned?n("li",[t._v("已签到")]):n("li",{on:{click:t.dailySignIn}},[t._v("日签到")]),n("li",{on:{click:t.monthSignIn}},[t._v("月签到")]),n("li",{on:{click:t.logout}},[t._v("退出")])],1),t._l(t.areaList,function(e,i){return n("ul",{key:i,staticClass:"area",attrs:{"data-title":e.name}},t._l(e.value,function(e,i){return n("router-link",{key:i,attrs:{to:{name:"DiscuzForumView",params:{url:t.targetHost+e.value}},tag:"li"}},[t._v(t._s(e.name))])}),1)})]:t._e(),n("a",{staticClass:"btn switch",on:{click:t.switchProxy}},[t._v("切换代理源("+t._s(t.proxyServerPlatom)+")")])],2)])},s=[],r=(n("a481"),n("6762"),n("2fdb"),n("ac6a"),n("28a5"),n("96cf"),n("3b8d")),a=n("cebc"),o=n("2f62"),c=n("adb5"),u=n("b383"),l=n.n(u),d=n("4260"),m=n("dc16"),g=n("db49"),p={name:"discuz-page",components:{},data:function(){return{areaList:[],userInfo:{username:"",password:"",QA:""}}},computed:Object(a["a"])({},Object(o["d"])(["isLoading","discuz"]),Object(o["c"])(["targetHost"]),{webSite:{get:function(){return this.discuz.webSite},set:function(t){this.$store.commit("UPDATE_DISCUZ",{webSite:t})}},proxyServerPlatom:function(){var t=this;return g["a"].filter(function(e){return e.host===t.discuz.HOST})[0].platom}}),mounted:function(){},activated:function(){this.init(),console.log("isLogin:",this.discuz.isLogin,this.discuz.HOST),document.querySelector(".overflow-container").scrollTop=sessionStorage.getItem("homePage")||0},beforeMount:function(){},destroyed:function(){},methods:Object(a["a"])({},Object(o["b"])(["switchProxy","logout","submitPost","dailySignIn","monthSignIn","getPageData"]),{init:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this.discuz,n=e.isLogin,i=e.signInfo,s=e.webSiteList,n?(i.isSigned||this.checkSigned(),this.getIndexPageData()):s.length||this.updateWebSiteList();case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),login:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,i,s,r,a,o,u,m,g,p,f,h;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.targetHost,n=this.discuz.HOST,i=this.userInfo,s=i.username,r=i.password,a=i.QA,!s||!r){t.next=18;break}return o=a.split(","),u=o.length>1&&o[0]||null,m=o.length>1&&o[1]||null,g={formhash:"30b7da0e",cookietime:"315360000",loginfield:"username",questionid:u,answer:m,username:s,password:r,userlogin:"true"},u&&m||(delete g.questionid,delete g.answer),p={httpConfig:{url:"".concat(e,"logging.php?action=login&loginsubmit=true"),method:"post",responseType:"arraybuffer",data:l.a.stringify(g)},encoding:"gbk"},this.$store.commit("SET_LOADING_STATUS",!0),t.next=11,c["a"].post("".concat(n,"/api/advancedProxy"),p);case 11:f=t.sent,h=f.headers,this.$store.commit("SET_LOADING_STATUS",!1),h.corscookies&&h.corscookies.split("|$$|").forEach(function(t){document.cookie=t}),this.$store.commit("UPDATE_DISCUZ",{isLogin:!!Object(d["e"])("cdb3_auth")}),this.checkSigned(),this.getIndexPageData();case 18:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),checkSigned:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,i,s,r,a,o,c,u;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.targetHost,n=this.discuz.signInfo,i="".concat(e,"my.php"),s=m["a"].my,t.next=5,this.getPageData({url:i,selector:s});case 5:r=t.sent,a=r.formhash,o=r.username,c=r.recentReply,u=r.recentTopics,this.discuz.formhash=a,u&&u.forEach(function(t){t&&t.title=="".concat(o,"/").concat((new Date).getMonth()+1,"月份/打卡签到帖")?t.lastPost.includes((new Date).Format("yyyy-M-d"))?n.isSigned=!0:n.tid=t.tid:t&&t.title=="".concat(o,"/").concat((new Date).getMonth()||12,"月份/打卡签到帖")&&(n.lastPostUrl=t.lastPostUrl)}),!n.lastPostUrl&&c&&c.forEach(function(t){t&&t.title=="".concat(o,"/").concat((new Date).getMonth()||12,"月份/打卡签到帖")&&(n.lastPostUrl=t.href)});case 10:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getIndexPageData:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e="".concat(this.targetHost,"index.php"),n=m["a"].index,i={},!sessionStorage.getItem(e)){t.next=7;break}i=JSON.parse(sessionStorage.getItem(e)),t.next=11;break;case 7:return t.next=9,this.getPageData({url:e,selector:n});case 9:i=t.sent,sessionStorage.setItem(e,JSON.stringify(i));case 11:this.areaList=i.areaList,s=Object.assign({},this.discuz.userInfo),s.creditList=i.creditList,s.username=i.username,this.$store.commit("UPDATE_DISCUZ",{userInfo:s}),i.username||this.logout();case 17:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),updateWebSiteList:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,i,s,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=g["a"].filter(function(t){return t.gfw}),n=e[Math.floor(Math.random()*e.length)].host,i="http://www.oznewspaper.com/",s=m["a"].webSiteList,t.next=6,this.getPageData({url:i,selector:s,HOST:n});case 6:r=t.sent,a=[],r.webSiteList.forEach(function(t){a.push(t.replace("\n","").replace(/ .*/g,""))}),localStorage.setItem("webSiteList",JSON.stringify(a)),this.$store.commit("UPDATE_DISCUZ",{webSiteList:a});case 11:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),onScroll:function(t){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){sessionStorage.setItem("homePage",t.target.scrollTop)},100)}})},f=p,h=(n("ef26"),n("2877")),S=Object(h["a"])(f,i,s,!1,null,"02669aa0",null);e["default"]=S.exports},ef26:function(t,e,n){"use strict";var i=n("391e"),s=n.n(i);s.a}}]);