(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DiscuzMyView"],{4513:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"discuzMy-page"},[i("div",{staticClass:"overflow-container"},[i("ul",{staticClass:"user-info"},[i("li",[t._v("用户名:"+t._s(t.discuz.userInfo.username))]),t.discuz.signInfo.isSigned?i("li",[t._v("签到状态:"+t._s(t.discuz.signInfo.isSigned?"已签到":"未签到"))]):t._e(),t._l(t.creditList,(function(e){return i("li",{key:e},[t._v(t._s(e))])}))],2),i("ul",{staticClass:"area",attrs:{"data-title":"我的收藏"}},[t._l(t.favorites,(function(e,s){return[e?i("li",{key:s},[i("router-link",{attrs:{to:{name:"DiscuzThreadView",params:{url:e.href},query:{scrollTop:e.scrollTop,tid:e.tid}}}},[t._v(t._s(e.title))])],1):t._e()]}))],2),i("ul",{staticClass:"area",attrs:{"data-title":"最近回复"}},[t._l(t.recentReply,(function(e,s){return[e?i("router-link",{key:s,attrs:{to:{name:"DiscuzThreadView",params:{url:e.href}},tag:"li"}},[t._v(t._s(e.title))]):t._e()]}))],2),i("ul",{staticClass:"area",attrs:{"data-title":"最近主题"}},[t._l(t.recentTopics,(function(e,s){return[e?i("router-link",{key:s,attrs:{to:{name:"DiscuzThreadView",params:{url:e.href}},tag:"li"}},[t._v(t._s(e.title))]):t._e()]}))],2)])])},a=[],r=i("2f62"),n=i("4260"),c={name:"discuz-page",components:{},data(){return{favorites:[],creditList:[],recentReply:[],recentTopics:[]}},computed:{...Object(r["d"])(["isLoading","discuz"]),...Object(r["c"])(["targetHost"])},mounted(){this.init()},beforeMount(){},destroyed(){},methods:{...Object(r["b"])(["getPageData"]),async init(){this.discuz.isLogin?(await this.getMyPageData(),this.favorites=JSON.parse(localStorage.getItem("favorites"))||[]):this.$router.replace("/index")},async getMyPageData(){let{targetHost:t,discuz:{userInfo:e,signInfo:i}}=this,s=t+"my.php",a=n["l"].my,r=await this.getPageData({url:s,selector:a});e.username=r.username,this.creditList=r.creditList,this.recentReply=r.recentReply,this.recentTopics=r.recentTopics,this.recentTopics&&this.recentTopics.forEach(t=>{t&&t.title==`${r.username}/${(new Date).getMonth()+1}月份/打卡签到帖`&&(t.lastPost.includes((new Date).Format("yyyy-M-d"))?i.isSigned=!0:i.tid=t.tid)})},onlongpress(t){if(confirm("确定删除该收藏吗")){let e=this.favorites.findIndex(e=>e===t);this.favorites.splice(e,1),localStorage.setItem("favorites",JSON.stringify(this.favorites))}}}},o=c,l=(i("7687"),i("2877")),u=Object(l["a"])(o,s,a,!1,null,"861fa0f2",null);e["default"]=u.exports},7687:function(t,e,i){"use strict";i("c33e")},c33e:function(t,e,i){}}]);