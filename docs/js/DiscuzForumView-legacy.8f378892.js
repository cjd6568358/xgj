(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DiscuzForumView"],{"333d":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pagination"},[e.prevUrl?r("a",{staticClass:"btn prev-btn",on:{click:function(t){return e.gotoPage(e.prevUrl)}}},[e._v("上一页")]):e._e(),r("a",{staticClass:"btn currPageInfo"},[e._v(e._s(e.pageNum+"/"+e.pageCount))]),e.nextUrl?r("a",{staticClass:"btn next-btn",on:{click:function(t){return e.gotoPage(e.nextUrl)}}},[e._v("下一页")]):e._e()])},a=[],s=r("5530"),o=r("2f62"),i={props:["prevUrl","nextUrl","pageNum","pageCount"],computed:Object(s["a"])({},Object(o["c"])(["targetHost"])),methods:{gotoPage:function(e){this.$router.push(encodeURIComponent(e))}}},c=i,u=(r("a777"),r("2877")),l=Object(u["a"])(c,n,a,!1,null,"41e63b94",null);t["a"]=l.exports},"4fea":function(e,t,r){"use strict";r("a952")},"760c":function(e,t,r){},"820c":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"discuzForum-page"},[r("Menus",{attrs:{url:e.url}}),r("div",{staticClass:"overflow-container",on:{touchmove:e.onScroll}},[e.forumList.length?[r("ul",{staticClass:"area",attrs:{"data-title":"子版块"}},e._l(e.forumList,(function(t,n){return r("router-link",{key:n,attrs:{to:{name:"DiscuzForumView",params:{url:t.href}},tag:"li"}},[e._v(e._s(t.name))])})),1)]:e._e(),e._l(e.threadList,(function(t,n){return r("ul",{key:n,staticClass:"area",attrs:{"data-title":t.name}},[e._l(t.value,(function(t,n){return["投票"!=t.type?r("router-link",{key:n,attrs:{to:{name:"DiscuzThreadView",params:{url:t.href}},tag:"li"}},[e._v(" ["+e._s(t.date)+"] "+e._s(t.title)+" "),t.permission?[e._v("[阅读权限"+e._s(t.permission)+"]")]:e._e(),e._v(" ♥"+e._s(t.thanks)+" ("+e._s(t.nums)+") ")],2):e._e()]}))],2)})),e.isLoading?e._e():r("Pagination",{attrs:{pageNum:e.pageInfo.pageNum,pageCount:e.pageInfo.pageCount,prevUrl:e.prevUrl,nextUrl:e.nextUrl}})],2)],1)},a=[],s=r("1da1"),o=r("5530"),i=(r("96cf"),r("ac1f"),r("5319"),r("2f62")),c=(r("adb5"),r("333d")),u=r("aa9a"),l=r("4260"),f={props:["url"],components:{Pagination:c["a"],Menus:u["a"]},data:function(){return{forumList:[],threadList:[],pageInfo:{pageNum:1,pageCount:1}}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(i["d"])(["isLoading","discuz"])),Object(i["c"])(["targetHost"])),{},{prevUrl:function(){var e="";return this.pageInfo&&1!=this.pageInfo.pageNum&&this.url&&(e=this.url.replace(/(^.*-)(\d.*)(.html$)/g,"$1".concat(this.pageInfo.pageNum-1,"$3"))),e},nextUrl:function(){var e="";return this.pageInfo&&this.pageInfo.pageNum<this.pageInfo.pageCount&&this.url&&(e=this.url.replace(/(^.*-)(\d.*)(.html$)/g,"$1".concat(this.pageInfo.pageNum+1,"$3"))),e}}),mounted:function(){return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},beforeRouteUpdate:function(e,t,r){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r(),t.next=3,n.getForumPageData(e.params.url);case 3:document.querySelector(".overflow-container").scrollTop=sessionStorage.getItem(e.params.url+"_scrollTop")||0;case 4:case"end":return t.stop()}}),t)})))()},activated:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getForumPageData(e.url);case 2:document.querySelector(".overflow-container").scrollTop=sessionStorage.getItem(e.url+"_scrollTop")||0;case 3:case"end":return t.stop()}}),t)})))()},beforeMount:function(){},destroyed:function(){},methods:Object(o["a"])(Object(o["a"])({},Object(i["b"])(["getPageData"])),{},{getForumPageData:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n={},!sessionStorage.getItem(e)){r.next=5;break}n=JSON.parse(sessionStorage.getItem(e)),r.next=10;break;case 5:return a=l["l"].forum,r.next=8,t.getPageData({url:t.targetHost+e,selector:a});case 8:n=r.sent,sessionStorage.setItem(e,JSON.stringify(n));case 10:t.forumList=n.forumList,t.threadList=n.threadList,t.pageInfo=n.pageInfo||{pageNum:1,pageCount:1},document.title=n.documentTitle;case 14:case"end":return r.stop()}}),r)})))()},onScroll:function(){var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){sessionStorage.setItem(e.url+"_scrollTop",document.querySelector(".overflow-container").scrollTop)}),500)}})},p=f,d=(r("e7c5"),r("2877")),m=Object(d["a"])(p,n,a,!1,null,"426a4341",null);t["default"]=m.exports},9703:function(e,t,r){},a434:function(e,t,r){"use strict";var n=r("23e7"),a=r("23cb"),s=r("a691"),o=r("50c4"),i=r("7b0b"),c=r("65f0"),u=r("8418"),l=r("1dde"),f=l("splice"),p=Math.max,d=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f},{splice:function(e,t){var r,n,l,f,h,v,b=i(this),w=o(b.length),_=a(e,w),x=arguments.length;if(0===x?r=n=0:1===x?(r=0,n=w-_):(r=x-2,n=d(p(s(t),0),w-_)),w+r-n>m)throw TypeError(g);for(l=c(b,n),f=0;f<n;f++)h=_+f,h in b&&u(l,f,b[h]);if(l.length=n,r<n){for(f=_;f<w-n;f++)h=f+n,v=f+r,h in b?b[v]=b[h]:delete b[v];for(f=w;f>w-n+r;f--)delete b[f-1]}else if(r>n)for(f=w-n;f>_;f--)h=f+n-1,v=f+r-1,h in b?b[v]=b[h]:delete b[v];for(f=0;f<r;f++)b[f+_]=arguments[f+2];return b.length=w-n+r,l}})},a692:function(e,t,r){"use strict";r("760c")},a777:function(e,t,r){"use strict";r("9703")},a952:function(e,t,r){},aa9a:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",{class:e.isOpened&&"opened"},[r("svg",{staticStyle:{position:"absolute",width:"0",height:"0"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[r("defs",[r("symbol",{attrs:{id:"icon-close",viewBox:"0 0 32 32"}},[r("title",[e._v("close")]),r("path",{attrs:{d:"M17.387 16l8.907-8.907c0.373-0.373 0.373-1.013 0-1.44-0.373-0.373-1.013-0.373-1.387 0l-8.907 8.907-8.907-8.853c-0.373-0.373-1.013-0.373-1.44 0-0.373 0.373-0.373 1.013 0 1.387l8.907 8.907-8.907 8.907c-0.373 0.373-0.373 1.013 0 1.44 0.373 0.373 1.013 0.373 1.387 0l8.907-8.907 8.907 8.907c0.373 0.373 1.013 0.373 1.387 0 0 0 0 0 0 0 0.373-0.373 0.373-1.013 0-1.44l-8.853-8.907z"}})])])]),r("a",{staticClass:"btn-menu",on:{click:e.toggleclass}},[r("svg",[r("use",{attrs:{"xlink:href":"#icon-close"}})])]),r("li",[r("span",{on:{click:e.saveProgress}},[e._v("收藏")])]),e.hasProgress?r("li",[r("span",{on:{click:e.delProgress}},[e._v("删除")])]):e._e(),e.tid&&e.fid?r("li",[r("span",{on:{click:e.onReply}},[e._v("回复")])]):e._e(),r("li",[r("span",{on:{click:e.onReload}},[e._v("刷新")])])])},a=[],s=(r("4de4"),r("c740"),r("a434"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"reply-modal"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.subject,expression:"subject"}],attrs:{type:"text",placeholder:"选填,请输入标题"},domProps:{value:e.subject},on:{input:function(t){t.target.composing||(e.subject=t.target.value)}}}),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"必填,请输入最少20个字内容"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),r("ul",[r("li",{staticClass:"btn submit",on:{click:e.submit}},[e._v("提交")]),r("li",{staticClass:"btn cancel",on:{click:e.closeModal}},[e._v("取消")])])])}),o=[],i=r("1da1"),c=r("5530"),u=(r("96cf"),r("2f62")),l={props:["url","fid","tid"],data:function(){return{subject:"",message:""}},destroyed:function(){},methods:Object(c["a"])(Object(c["a"])({},Object(u["b"])(["submitReply"])),{},{submit:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.subject,a=t.message,s=t.fid,o=t.tid,r.next=3,t.submitReply({subject:n,message:a,fid:s,tid:o});case 3:t.closeModal(e),setTimeout((function(){sessionStorage.removeItem(t.url),location.reload(!0)}),100);case 5:case"end":return r.stop()}}),r)})))()},closeModal:function(e){this.$emit("closeModal",e)}})},f=l,p=(r("4fea"),r("2877")),d=Object(p["a"])(f,s,o,!1,null,"27d82ad3",null),m=d.exports,g={props:["url","tid","fid"],components:{},data:function(){return{favorites:[],isOpened:!1}},mounted:function(){this.favorites=JSON.parse(localStorage.getItem("favorites"))||[]},computed:{hasProgress:function(){var e=this;return this.favorites.filter((function(t){return t.tid==e.tid}))[0]}},methods:{toggleclass:function(){this.isOpened=!this.isOpened},saveProgress:function(){var e=this,t=this.favorites.findIndex((function(t){return t.tid==e.tid})),r={href:this.url,tid:this.tid,title:document.title,scrollTop:document.querySelector(".overflow-container").scrollTop};t>=0?this.favorites.splice(t,1,r):this.favorites.push(r),localStorage.setItem("favorites",JSON.stringify(this.favorites))},delProgress:function(){var e=this,t=this.favorites.findIndex((function(t){return t.tid==e.tid}));this.favorites.splice(t,1),localStorage.setItem("favorites",JSON.stringify(this.favorites))},onReply:function(){var e=this.$createElement;this.$openModal({position:"bottom",maskClosable:!0,content:e(m,{attrs:{url:this.url,fid:this.fid,tid:this.tid}})}),this.toggleclass()},onReload:function(){sessionStorage.removeItem(this.url),location.reload(!0)}}},h=g,v=(r("a692"),Object(p["a"])(h,n,a,!1,null,"5027dd8c",null));t["a"]=v.exports},acad:function(e,t,r){},e7c5:function(e,t,r){"use strict";r("acad")}}]);