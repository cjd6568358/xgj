(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DiscuzThreadView"],{"01f9":function(t,e,n){"use strict";var r=n("2d00"),o=n("5ca1"),s=n("2aba"),i=n("32e9"),a=n("84f2"),c=n("41a0"),l=n("7f20"),u=n("38fd"),p=n("2b4c")("iterator"),h=!([].keys&&"next"in[].keys()),f="@@iterator",d="keys",m="values",g=function(){return this};t.exports=function(t,e,n,b,v,$,y){c(n,e,b);var P,x,_,S=function(t){if(!h&&t in w)return w[t];switch(t){case d:return function(){return new n(this,t)};case m:return function(){return new n(this,t)}}return function(){return new n(this,t)}},L=e+" Iterator",N=v==m,T=!1,w=t.prototype,O=w[p]||w[f]||v&&w[v],k=O||S(v),I=v?N?S("entries"):k:void 0,C="Array"==e&&w.entries||O;if(C&&(_=u(C.call(new t)),_!==Object.prototype&&_.next&&(l(_,L,!0),r||"function"==typeof _[p]||i(_,p,g))),N&&O&&O.name!==m&&(T=!0,k=function(){return O.call(this)}),r&&!y||!h&&!T&&w[p]||i(w,p,k),a[e]=k,a[L]=g,v)if(P={values:N?k:S(m),keys:$?k:S(d),entries:I},y)for(x in P)x in w||s(w,x,P[x]);else o(o.P+o.F*(h||T),e,P);return P}},"05d9":function(t,e,n){},"0d58":function(t,e,n){var r=n("ce10"),o=n("e11e");t.exports=Object.keys||function(t){return r(t,o)}},1495:function(t,e,n){var r=n("86cc"),o=n("cb7c"),s=n("0d58");t.exports=n("9e1e")?Object.defineProperties:function(t,e){o(t);var n,i=s(e),a=i.length,c=0;while(a>c)r.f(t,n=i[c++],e[n]);return t}},"2aeb":function(t,e,n){var r=n("cb7c"),o=n("1495"),s=n("e11e"),i=n("613b")("IE_PROTO"),a=function(){},c="prototype",l=function(){var t,e=n("230e")("iframe"),r=s.length,o="<",i=">";e.style.display="none",n("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(o+"script"+i+"document.F=Object"+o+"/script"+i),t.close(),l=t.F;while(r--)delete l[c][s[r]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(a[c]=r(t),n=new a,a[c]=null,n[i]=t):n=l(),void 0===e?n:o(n,e)}},"333d":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pagination"},[t.prevUrl?n("a",{staticClass:"btn prev-btn",on:{click:function(e){t.gotoPage(t.prevUrl)}}},[t._v("上一页")]):t._e(),n("a",{staticClass:"btn currPageInfo"},[t._v(t._s(t.currPageNum+"/"+t.totalPageNum))]),t.nextUrl?n("a",{staticClass:"btn next-btn",on:{click:function(e){t.gotoPage(t.nextUrl)}}},[t._v("下一页")]):t._e()])},o=[],s=n("be94"),i=n("2f62"),a={props:["prevUrl","nextUrl","currPageNum","totalPageNum"],computed:Object(s["a"])({},Object(i["c"])(["targetHost"])),methods:{gotoPage(t){this.$router.push(encodeURIComponent(`${this.targetHost}${t}`))}}},c=a,l=(n("b741"),n("2877")),u=Object(l["a"])(c,r,o,!1,null,"f82b4964",null);u.options.__file="index.vue";e["a"]=u.exports},"38fd":function(t,e,n){var r=n("69a8"),o=n("4bf8"),s=n("613b")("IE_PROTO"),i=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?i:null}},"41a0":function(t,e,n){"use strict";var r=n("2aeb"),o=n("4630"),s=n("7f20"),i={};n("32e9")(i,n("2b4c")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(i,{next:o(1,n)}),s(t,e+" Iterator")}},"4bf8":function(t,e,n){var r=n("be13");t.exports=function(t){return Object(r(t))}},"4cc1":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"discuzThread-page"},[n("Menus",{attrs:{url:t.url}}),n("div",{staticClass:"overflow-container"},[n("ul",{staticClass:"thread"},t._l(t.postList,function(e,r){return n("li",{key:r,staticClass:"post"},[n("div",{staticClass:"post-info"},[n("span",[t._v(t._s(e.postFloor))]),n("span",[t._v(t._s(e.authorName))]),n("span",[t._v(t._s(e.authorLevel))]),n("div",{staticClass:"post-time"},[t._v(t._s(e.postTime))])]),n("h2",[t._v(t._s(e.postTitle))]),n("div",{staticClass:"post-content",domProps:{innerHTML:t._s(e.content)}})])}),0),t.isLoading?t._e():n("Pagination",{attrs:{currPageNum:t.pageInfo.currPageNum,totalPageNum:t.pageInfo.totalPageNum,prevUrl:t.prevUrl,nextUrl:t.pageInfo.nextUrl}})],1)],1)},o=[],s=(n("ac6a"),n("a481"),n("be94")),i=n("2f62"),a=n("adb5"),c=n("333d"),l=n("aa9a"),u=n("dc16"),p={props:["url"],components:{Pagination:c["a"],Menus:l["a"]},data(){return{postList:[],pageInfo:{currPageNum:1,totalPageNum:1,nextPageNum:null,nextUrl:null}}},computed:Object(s["a"])({},Object(i["d"])(["isLoading","discuz"]),Object(i["c"])(["targetHost"]),{prevUrl(){let t="";return 1!=this.pageInfo.currPageNum&&this.url&&(t=this.url.replace(/.*bbs\//g,"").replace(/(\d*)\.html/,`${this.pageInfo.currPageNum-1}.html`)),t}}),async mounted(){await this.getThreadPageJson(this.url),this.$route.query.scrollTop&&this.$nextTick(()=>{document.querySelector(".overflow-container").scrollTop=this.$route.query.scrollTop})},beforeMount(){},destroyed(){},async beforeRouteUpdate(t,e,n){n(),await this.getThreadPageJson(t.params.url),document.querySelector(".overflow-container").scrollTop=0},methods:{async getThreadPageJson(t){let e={};if(sessionStorage.getItem(t))e=JSON.parse(sessionStorage.getItem(t));else{let n={httpConfig:{url:`${t}`,method:"get",responseType:"arraybuffer"},encoding:"gbk",selector:u["a"].thread};this.$store.commit("SET_LOADING_STATUS",!0);let r=await a["a"].post(`${this.discuz.HOST}/api/html2Json`,n),o=r.data.data;this.$store.commit("SET_LOADING_STATUS",!1),e=o,sessionStorage.setItem(t,JSON.stringify(e))}document.title=e.documentTitle,e.pageInfo&&(this.pageInfo=e.pageInfo),this.postList=e.postList,this.postList.forEach(t=>{t.content=t.content.replace(/="attachment/g,`="${this.targetHost}attachment`).replace(/:14pt/g,":5vw")})}}},h=p,f=(n("602e"),n("2877")),d=Object(f["a"])(h,r,o,!1,null,null,null);d.options.__file="thread.vue";e["default"]=d.exports},"51a2":function(t,e,n){},"5ca1":function(t,e,n){var r=n("7726"),o=n("8378"),s=n("32e9"),i=n("2aba"),a=n("9b43"),c="prototype",l=function(t,e,n){var u,p,h,f,d=t&l.F,m=t&l.G,g=t&l.S,b=t&l.P,v=t&l.B,$=m?r:g?r[e]||(r[e]={}):(r[e]||{})[c],y=m?o:o[e]||(o[e]={}),P=y[c]||(y[c]={});for(u in m&&(n=e),n)p=!d&&$&&void 0!==$[u],h=(p?$:n)[u],f=v&&p?a(h,r):b&&"function"==typeof h?a(Function.call,h):h,$&&i($,u,h,t&l.U),y[u]!=h&&s(y,u,f),b&&P[u]!=h&&(P[u]=h)};r.core=o,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},"602e":function(t,e,n){"use strict";var r=n("51a2"),o=n.n(r);o.a},"645c":function(t,e,n){"use strict";var r=n("d226"),o=n.n(r);o.a},"7f20":function(t,e,n){var r=n("86cc").f,o=n("69a8"),s=n("2b4c")("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,s)&&r(t,s,{configurable:!0,value:e})}},"84f2":function(t,e){t.exports={}},"9c6c":function(t,e,n){var r=n("2b4c")("unscopables"),o=Array.prototype;void 0==o[r]&&n("32e9")(o,r,{}),t.exports=function(t){o[r][t]=!0}},aa9a:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{class:t.isOpened&&"opened"},[n("svg",{staticStyle:{position:"absolute",width:"0",height:"0"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[n("defs",[n("symbol",{attrs:{id:"icon-close",viewBox:"0 0 32 32"}},[n("title",[t._v("close")]),n("path",{attrs:{d:"M17.387 16l8.907-8.907c0.373-0.373 0.373-1.013 0-1.44-0.373-0.373-1.013-0.373-1.387 0l-8.907 8.907-8.907-8.853c-0.373-0.373-1.013-0.373-1.44 0-0.373 0.373-0.373 1.013 0 1.387l8.907 8.907-8.907 8.907c-0.373 0.373-0.373 1.013 0 1.44 0.373 0.373 1.013 0.373 1.387 0l8.907-8.907 8.907 8.907c0.373 0.373 1.013 0.373 1.387 0 0 0 0 0 0 0 0.373-0.373 0.373-1.013 0-1.44l-8.853-8.907z"}})])])]),n("a",{staticClass:"btn-menu",on:{click:t.toggleclass}},[n("svg",[n("use",{attrs:{"xlink:href":"#icon-close"}})])]),n("li",[n("span",{on:{click:t.saveReadProgress}},[t._v("保存")])]),t.readProgress?n("li",[n("span",{on:{click:t.deleteReadProgress}},[t._v("删除")])]):t._e()])},o=[],s=(n("28a5"),n("a481"),{props:["url"],data(){return{collections:[],isOpened:!1}},mounted(){this.collections=JSON.parse(localStorage.getItem("collections"))||[]},computed:{tid(){return this.url.includes("redirect.php?goto")?this.url.replace(/^redirect.*ptid=/g,""):this.url.split("-")[1]},readProgress(){return this.collections.filter(t=>{return t.tid==this.tid})[0]}},methods:{toggleclass(){this.isOpened=!this.isOpened},saveReadProgress(){let t=this.collections.findIndex(t=>{return t.tid==this.tid}),e={href:this.url,tid:this.tid,title:document.title,scrollTop:document.querySelector(".overflow-container").scrollTop};t>=0?this.collections.splice(t,1,e):this.collections.push(e),localStorage.setItem("collections",JSON.stringify(this.collections))},deleteReadProgress(){let t=this.collections.findIndex(t=>{return t.tid==this.tid});this.collections.splice(t,1),localStorage.setItem("collections",JSON.stringify(this.collections))}}}),i=s,a=(n("645c"),n("2877")),c=Object(a["a"])(i,r,o,!1,null,"1544ec9e",null);c.options.__file="index.vue";e["a"]=c.exports},ac6a:function(t,e,n){for(var r=n("cadf"),o=n("0d58"),s=n("2aba"),i=n("7726"),a=n("32e9"),c=n("84f2"),l=n("2b4c"),u=l("iterator"),p=l("toStringTag"),h=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=o(f),m=0;m<d.length;m++){var g,b=d[m],v=f[b],$=i[b],y=$&&$.prototype;if(y&&(y[u]||a(y,u,h),y[p]||a(y,p,b),c[b]=h,v))for(g in r)y[g]||s(y,g,r[g],!0)}},b741:function(t,e,n){"use strict";var r=n("05d9"),o=n.n(r);o.a},cadf:function(t,e,n){"use strict";var r=n("9c6c"),o=n("d53b"),s=n("84f2"),i=n("6821");t.exports=n("01f9")(Array,"Array",function(t,e){this._t=i(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),s.Arguments=s.Array,r("keys"),r("values"),r("entries")},d226:function(t,e,n){},d53b:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},dc16:function(t,e,n){"use strict";e["a"]={webSiteList:"\n    li@webSiteList{\n        &{$}\n    };\n    ",index:"\n    .mainbox.forumlist@areaList{\n        h3 a{$name};\n        tbody:has(.lastpost a)@value{\n            h2 a[href=$value]{$name}\n        }\n    };\n    #creditlist_menu>li@creditList{\n        &{$}\n    };\n    #creditlist{$username}\n    ",forum:"\n    filter MathCeil() {\n        return Math.ceil(this/10)\n    };\n    head title{$documentTitle};\n    table:has(thead.separation)@forumList{\n        thead.separation td b{$name};\n        tbody:has(th)@value{\n            th span[id^=thread_] a[href=$href]{$title};\n            .nums{$nums};\n            td.icon img[alt=$type];\n            span.bold{$permission|Number}\n            .author cite{html($thanks|replace(/<a(.*)absmiddle\">/g,'')|Number)}\n        }\n    };\n    .mainbox.threadlist+.pages_btns .pages@pageInfo|pack{\n        $currPageNum = 1;\n        $totalPageNum = 1;\n        $nextPageNum = null;\n        $nextUrl = null;\n        strong{$currPageNum|Number};\n        strong+a[href=$nextUrl]{$nextPageNum|Number};\n        em{$totalPageNum|Number|MathCeil};\n    }\n    ",thread:"\n    filter MathCeil() {\n        return Math.ceil(this/10)\n    };\n    form input[name=formhash][value=$formhash];\n    form #ajax_favorite[href=$tid|replace(/^my.php.*tid=/g,'')];\n    head title{$documentTitle};\n    form .mainbox.viewthread@postList{\n        .postauthor cite a[id^=userinfo]{$authorName};\n        .postauthor p:nth-of-type(1){$authorLevel};\n        // .postauthor .profile{$authorProfile}\n        .postcontent .postinfo strong[id=$pid|replace(/postnum_/g,'')][onclick=$absPostUrl|replace(/',.*/g,'')|match(/viewth.*/g)|first]{$postFloor}\n        .postcontent .postinfo{find('小',$postTime, '只看该作者')}\n        .postcontent .postmessage>h2{html($postTitle)}\n        .postcontent .postmessage .t_msgfont{html($content|replace(/border(.*)alt=\"\"/g,\"\"))}\n    };\n    form+.pages_btns .pages@pageInfo|pack{\n        $currPageNum = 1;\n        $totalPageNum = 1;\n        $nextPageNum = null;\n        $nextUrl = null;\n        strong{$currPageNum|Number};\n        strong+a[href=$nextUrl]{$nextPageNum|Number};\n        em{$totalPageNum|Number|MathCeil};\n    }\n    ",my:"\n    .credits_info ul>li@creditList{\n        &{$|trim()}\n    };\n    #wrapper #menu ul li:nth-child(2) a[href=$formhash|split('formhash=')|slice(1,2)|first];\n    #menu li cite a{$username};\n    .mainbox table:nth-of-type(1) tbody tr@recentTopics{\n        td:nth-child(1) a[href=$href]{$title}\n        td:nth-child(1) a[href=$tid|split('-')|slice(1,2)|first];\n        td:nth-child(2){$forum}\n        td:nth-child(3) a[href=$lastPostUrl]{$lastPost}\n        td:nth-child(4){$status}\n    };\n    .mainbox table:nth-of-type(2) tbody tr@recentReply{\n        td:nth-child(1) a[href=$href]{$title}\n        td:nth-child(1) a[href=$tid|replace(/^redirect.*ptid=/g,'')];\n        td:nth-child(2){$forum}\n        td:nth-child(3){$lastPost}\n        td:nth-child(4){$status}\n    }\n    "}},fab2:function(t,e,n){var r=n("7726").document;t.exports=r&&r.documentElement}}]);
//# sourceMappingURL=DiscuzThreadView.b8719e4d.js.map